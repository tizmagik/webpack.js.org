(self.webpackChunk=self.webpackChunk||[]).push([[5389],{5389:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return p}}),t(7378);var n=t(5318);function o(){return(o=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}const s={};function p({components:e,...a}){return(0,n.kt)("wrapper",o({},s,a,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("hr",null),(0,n.kt)("p",null,"title: ECMAScript Modules\nsort: 19\ncontributors:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"sokra\nrelated:"),(0,n.kt)("li",{parentName:"ul"},"title: ECMAScript Modules in Node.js\nurl: ",(0,n.kt)("a",{parentName:"li",href:"https://nodejs.org/api/esm.html"},"https://nodejs.org/api/esm.html"))),(0,n.kt)("hr",null),(0,n.kt)("p",null,"ECMAScript Modules (ESM) is a ",(0,n.kt)("a",{parentName:"p",href:"https://tc39.github.io/ecma262/#sec-modules"},"specification")," for using Modules in the Web.\nIt's supported by all modern browsers and the recommended way of writing modular code for the Web."),(0,n.kt)("p",null,"webpack supported processing ECMAScript Modules to optimize them."),(0,n.kt)("h2",{id:"exporting"},"Exporting",(0,n.kt)("a",{parentName:"h2",href:"#exporting","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"export")," keyword allows to expose things from an ESM to other modules:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-js"},(0,n.kt)("span",{parentName:"code",className:"token keyword"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,n.kt)("span",{parentName:"code",className:"token constant"},"CONSTANT")," ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,n.kt)("span",{parentName:"code",className:"token number"},"42"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"let")," variable ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,n.kt)("span",{parentName:"code",className:"token number"},"42"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token comment"},"// only reading is exposed"),"\n",(0,n.kt)("span",{parentName:"code",className:"token comment"},"// it's not possible to modify the variable from outside"),"\n\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"fun"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token function"},"log"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token string"},"'fun'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"class")," ",(0,n.kt)("span",{parentName:"code",className:"token class-name"},"C")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"extends")," ",(0,n.kt)("span",{parentName:"code",className:"token class-name"},"Super")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token function"},"method"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token function"},"log"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token string"},"'method'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"let")," a",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},",")," b",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},",")," other",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{")," a",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},",")," b",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},",")," other ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"as")," c ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"default")," ",(0,n.kt)("span",{parentName:"code",className:"token number"},"1")," ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"+")," ",(0,n.kt)("span",{parentName:"code",className:"token number"},"2")," ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"+")," ",(0,n.kt)("span",{parentName:"code",className:"token number"},"3")," ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"+")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"more"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"))),(0,n.kt)("h2",{id:"importing"},"Importing",(0,n.kt)("a",{parentName:"h2",href:"#importing","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," keyword allows to get references to things from other modules into an ESM:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-js"},(0,n.kt)("span",{parentName:"code",className:"token keyword"},"import")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{")," ",(0,n.kt)("span",{parentName:"code",className:"token constant"},"CONSTANT"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},",")," variable ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"from")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'./module.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token comment"},'// import "bindings" to exports from another module'),"\n",(0,n.kt)("span",{parentName:"code",className:"token comment"},"// these bindings are live. The values are not copied,"),"\n",(0,n.kt)("span",{parentName:"code",className:"token comment"},'// instead accessing "variable" will get the current value'),"\n",(0,n.kt)("span",{parentName:"code",className:"token comment"},"// in the imported module"),"\n\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"import")," ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"*")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"as")," module ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"from")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'./module.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\nmodule",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token function"},"fun"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token comment"},'// import the "namespace object" which contains all exports'),"\n\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"import")," theDefaultValue ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"from")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'./module.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token comment"},'// shortcut to import the "default" export'))),(0,n.kt)("h2",{id:"flagging-modules-as-esm"},"Flagging modules as ESM",(0,n.kt)("a",{parentName:"h2",href:"#flagging-modules-as-esm","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"By default webpack will automatically detect whether a file is an ESM or a different module system."),(0,n.kt)("p",null,"Node.js established a way of explicitly setting the module type of files by using a property in the ",(0,n.kt)("inlineCode",{parentName:"p"},"package.json"),".\nSetting ",(0,n.kt)("inlineCode",{parentName:"p"},'"type": "module"')," in a package.json does force all files below this package.json to be ECMAScript Modules.\nSetting ",(0,n.kt)("inlineCode",{parentName:"p"},'"type": "commonjs"')," will instead force them to be CommonJS Modules."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"type"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"module"'),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("p",null,"In addition to that, files can set the module type by using ",(0,n.kt)("inlineCode",{parentName:"p"},".mjs")," or ",(0,n.kt)("inlineCode",{parentName:"p"},".cjs")," extension. ",(0,n.kt)("inlineCode",{parentName:"p"},".mjs")," will force them to be ESM, ",(0,n.kt)("inlineCode",{parentName:"p"},".cjs")," force them to be CommonJs."),(0,n.kt)("p",null,"In DataURIs using the ",(0,n.kt)("inlineCode",{parentName:"p"},"text/javascript")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"application/javascript")," mime type will also force module type to ESM."),(0,n.kt)("p",null,"In addition to the module format, flagging modules as ESM also affect the resolving logic, interop logic and the available symbols in modules."),(0,n.kt)("p",null,"Imports in ESM are resolved more strictly. Relative requests must include a filename and file extension."),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{parentName:"aside",className:"tip__prefix"},"tip"),(0,n.kt)("p",{parentName:"aside"},"Requests to packages e.g. ",(0,n.kt)("inlineCode",{parentName:"p"},'import "lodash"')," are still supported.")),(0,n.kt)("p",null,'Only the "default" export can be imported from non-ESM. Named exports are not available.'),(0,n.kt)("p",null,"CommonJs Syntax is not available: ",(0,n.kt)("inlineCode",{parentName:"p"},"require"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"module"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"exports"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"__filename"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"__dirname"),"."),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{parentName:"aside",className:"tip__prefix"},"tip"),(0,n.kt)("p",{parentName:"aside"},"HMR can be used with ",(0,n.kt)("a",{parentName:"p",href:"/api/module-variables/#importmetawebpackhot"},(0,n.kt)("inlineCode",{parentName:"a"},"import.meta.webpackHot"))," instead of ",(0,n.kt)("a",{parentName:"p",href:"/api/module-variables/#modulehot-webpack-specific"},(0,n.kt)("inlineCode",{parentName:"a"},"module.hot")),".")))}p.isMDXComponent=!0}}]);