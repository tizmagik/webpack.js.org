(self.webpackChunk=self.webpackChunk||[]).push([[6536],{6536:function(a,e,n){"use strict";n.r(e),e.default='<p>The <code>Compiler</code> module is the main engine that creates a compilation instance with all the options passed through the <a href="/api/cli">CLI</a> or <a href="/api/node">Node API</a>. It extends the <code>Tapable</code> class in order to register and call plugins. Most user facing plugins are first registered on the <code>Compiler</code>.</p> <p>When developing a plugin for webpack, you might want to know where each hook is called. To learn this, search for <code>hooks.&#x3C;hook name>.call</code> across the webpack source</p> <h2 id="watching">Watching<a href="#watching" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>The <code>Compiler</code> supports <a href="/api/node/#watching">watching</a> which monitors the file system and recompiles as files change. When in watch mode, the compiler will emit the additional events such as <code>watchRun</code>, <code>watchClose</code>, and <code>invalid</code>. This is typically used in <a href="/guides/development">development</a>, usually under the hood of tools like <code>webpack-dev-server</code>, so that the developer doesn\'t need to re-compile manually every time. Watch mode can also be entered via the <a href="/api/cli/#watch-options">CLI</a>.</p> <h2 id="hooks">Hooks<a href="#hooks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>The following lifecycle hooks are exposed by the <code>compiler</code> and can be accessed as such:</p> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>someHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">\'MyPlugin\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token comment">/* ... */</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>Depending on the hook type, <code>tapAsync</code> and <code>tapPromise</code> may also be available.</p> <p>For the description of hook types, see <a href="https://github.com/webpack/tapable#tapable">the Tapable docs</a>.</p> <h3 id="environment"><code>environment</code><a href="#environment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Called while preparing the compiler environment, right after initializing the plugins in the configuration file.</p> <h3 id="afterenvironment"><code>afterEnvironment</code><a href="#afterenvironment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Called right after the <code>environment</code> hook, when the compiler environment setup is complete.</p> <h3 id="entryoption"><code>entryOption</code><a href="#entryoption" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called after the <a href="/configuration/entry-context/#entry"><code>entry</code> configuration</a> from webpack options has been processed.</p> <ul> <li>Callback Parameters: <a href="/configuration/entry-context/#context"><code>context</code></a>, <a href="/configuration/entry-context/#entry"><code>entry</code></a></li> </ul> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>entryOption<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">\'MyPlugin\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> entry</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token comment">/* ... */</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="afterplugins"><code>afterPlugins</code><a href="#afterplugins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Called after setting up initial set of internal plugins.</p> <ul> <li>Callback Parameters: <code>compiler</code></li> </ul> <h3 id="afterresolvers"><code>afterResolvers</code><a href="#afterresolvers" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Triggered after resolver setup is complete.</p> <ul> <li>Callback Parameters: <code>compiler</code></li> </ul> <h3 id="initialize"><code>initialize</code><a href="#initialize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Called when a compiler object is initialized.</p> <h3 id="beforerun"><code>beforeRun</code><a href="#beforerun" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>Adds a hook right before running the compiler.</p> <ul> <li>Callback Parameters: <code>compiler</code></li> </ul> <h3 id="run"><code>run</code><a href="#run" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>Hook into the compiler before it begins reading <a href="/configuration/other-options/#recordspath"><code>records</code></a>.</p> <ul> <li>Callback Parameters: <code>compiler</code></li> </ul> <h3 id="watchrun"><code>watchRun</code><a href="#watchrun" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>Executes a plugin during watch mode after a new compilation is triggered but before the compilation is actually started.</p> <ul> <li>Callback Parameters: <code>compiler</code></li> </ul> <h3 id="normalmodulefactory"><code>normalModuleFactory</code><a href="#normalmodulefactory" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Called after a <a href="/api/normalmodulefactory-hooks">NormalModuleFactory</a> is created.</p> <ul> <li>Callback Parameters: <code>normalModuleFactory</code></li> </ul> <h3 id="contextmodulefactory"><code>contextModuleFactory</code><a href="#contextmodulefactory" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Runs a plugin after a <a href="/api/contextmodulefactory-hooks">ContextModuleFactory</a> is created.</p> <ul> <li>Callback Parameters: <code>contextModuleFactory</code></li> </ul> <h3 id="beforecompile"><code>beforeCompile</code><a href="#beforecompile" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>Executes a plugin after compilation parameters are created.</p> <ul> <li>Callback Parameters: <code>compilationParams</code></li> </ul> <p>The <code>compilationParams</code> variable is initialized as follows:</p> <pre><code class="hljs language-js">compilationParams <span class="token operator">=</span> <span class="token punctuation">{</span>\n  normalModuleFactory<span class="token punctuation">,</span>\n  contextModuleFactory<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>This hook can be used to add/modify the compilation parameters:</p> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>beforeCompile<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">\'MyPlugin\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  params<span class="token punctuation">[</span><span class="token string">\'MyPlugin - data\'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">\'important stuff my plugin will use later\'</span><span class="token punctuation">;</span>\n  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="compile"><code>compile</code><a href="#compile" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Called right after <code>beforeCompile</code>, before a new compilation is created.</p> <ul> <li>Callback Parameters: <code>compilationParams</code></li> </ul> <h3 id="thiscompilation"><code>thisCompilation</code><a href="#thiscompilation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Executed while initializing the compilation, right before emitting the <code>compilation</code> event.</p> <ul> <li>Callback Parameters: <code>compilation</code>, <code>compilationParams</code></li> </ul> <h3 id="compilation"><code>compilation</code><a href="#compilation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Runs a plugin after a compilation has been created.</p> <ul> <li>Callback Parameters: <code>compilation</code>, <code>compilationParams</code></li> </ul> <h3 id="make"><code>make</code><a href="#make" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncParallelHook</code></p> <p>Executed before finishing the compilation.</p> <ul> <li>Callback Parameters: <code>compilation</code></li> </ul> <h3 id="aftercompile"><code>afterCompile</code><a href="#aftercompile" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>Called after finishing and sealing the compilation.</p> <ul> <li>Callback Parameters: <code>compilation</code></li> </ul> <h3 id="shouldemit"><code>shouldEmit</code><a href="#shouldemit" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called before emitting assets. Should return a boolean telling whether to emit.</p> <ul> <li>Callback Parameters: <code>compilation</code></li> </ul> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>shouldEmit<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">\'MyPlugin\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token comment">// return true to emit the output, otherwise false</span>\n  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="emit"><code>emit</code><a href="#emit" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>Executed right before emitting assets to output dir.</p> <ul> <li>Callback Parameters: <code>compilation</code></li> </ul> <h3 id="afteremit"><code>afterEmit</code><a href="#afteremit" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>Called after emitting assets to output directory.</p> <ul> <li>Callback Parameters: <code>compilation</code></li> </ul> <h3 id="assetemitted"><code>assetEmitted</code><a href="#assetemitted" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>Executed when an asset has been emitted. Provides access to information about the emitted asset, such as its output path and byte content.</p> <ul> <li>Callback Parameters: <code>file</code>, <code>info</code></li> </ul> <p>For example, you may access the asset\'s content buffer via <code>info.content</code>:</p> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>assetEmitted<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>\n  <span class="token string">\'MyPlugin\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> <span class="token punctuation">{</span> content<span class="token punctuation">,</span> source<span class="token punctuation">,</span> outputPath<span class="token punctuation">,</span> compilation<span class="token punctuation">,</span> targetPath <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x3C;Buffer 66 6f 6f 62 61 72></span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="done"><code>done</code><a href="#done" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>Executed when the compilation has completed.</p> <ul> <li>Callback Parameters: <code>stats</code></li> </ul> <h3 id="additionalpass"><code>additionalPass</code><a href="#additionalpass" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>This hook allows you to do a one more additional pass of the build.</p> <h3 id="failed"><code>failed</code><a href="#failed" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Called if the compilation fails.</p> <ul> <li>Callback Parameters: <code>error</code></li> </ul> <h3 id="invalid"><code>invalid</code><a href="#invalid" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Executed when a watching compilation has been invalidated.</p> <ul> <li>Callback Parameters: <code>fileName</code>, <code>changeTime</code></li> </ul> <h3 id="watchclose"><code>watchClose</code><a href="#watchclose" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Called when a watching compilation has stopped.</p> <h3 id="infrastructurelog"><code>infrastructureLog</code><a href="#infrastructurelog" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Allows to use infrastructure logging when enabled in the configuration via <a href="/configuration/other-options/#infrastructurelogging"><code>infrastructureLogging</code> option</a>.</p> <ul> <li>Callback Parameters: <code>name</code>, <code>type</code>, <code>args</code></li> </ul> <h3 id="log"><code>log</code><a href="#log" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Allows to log into <a href="/configuration/stats/">stats</a> when enabled, see <a href="/configuration/stats/#stats-options"><code>stats.logging</code>, <code>stats.loggingDebug</code> and <code>stats.loggingTrace</code> options</a>.</p> <ul> <li>Callback Parameters: <code>origin</code>, <code>logEntry</code></li> </ul> '}}]);